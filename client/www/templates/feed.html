<!DOCTYPE html>
<ion-view view-title="Instanews - {{user.username}}" style="background: #C0C0C0">
   <ion-nav-buttons side="secondary">
      <a class="button button-clear icon ion-plus-round"
         href="#/post/article">
      </a>
   </ion-nav-buttons>
   <ion-content>
      <ion-refresher pulling-text="Fresh Stuff" on-refresh="onRefresh()">
      </ion-refresher>
      <div class="item no-padding" style="width:100%;height:38%">
         <inMap>
            <div style="width:100%;height:100%" id="feedMap"></div>
         </inMap>
      </div>
      <ul class="list">
         <ion-item class="no-padding card" ng-repeat="article in articles | orderBy: '-(rating)'">
            <a class="item no-padding item-text-wrap"
               style="border:transparent"
               href="#/articles/{{article.myId}}">
               <div class="item"
                  style="border-bottom:0px;">
                  {{article.title}}
                  <p>{{article.topSub.text}}</p>
               </div>
               <div class="item"
                  style="border-top:0px;padding-right:0px;padding-left:0px;padding-top:0px;padding-bottom:1px">

                  <file-item ng-if="article.topSub._file"
                     subarticle="article.topSub">
                  </file-item>
                  <!--div ng-if="article.topSub._file"
                     class="item no-padding item-image">
                     <div ng-if="article.topSub._file.type.indexOf('image') > -1">
                        <img src="{{article.topSub._file.name}}">
                     </div>
                     <div ng-if="article.topSub._file.type.indexOf('video') > -1">
                        <img src="{{article.topSub._file.poster}}">
                     </div>
                  </div-->

                  <div class="item item-icon-right"
                     style="padding-top:0px;border-top:0px">
                     <div class="icon">
                        <a class="button button-clear no-padding button-small"
                           style="border:transparent"
                           href="#/journalists/{{article.topSub.username}}">
                           {{article.topSub.username}}
                        </a>
                     </div>
                  </div>
               </div>
            </a>

            <div class="item" style="border:0px;padding-top:0px;padding-bottom:0px">
               <votes style="border: transparent"
                  voteable="article">
               </votes>
               <comments owner="article"></comments>
            </div>

         </li>
      </ul>
      <ion-infinite-scroll
         ng-if="itemsAvailable"
         on-infinite="loadMore()"
         distance="1%">
      </ion-infinite-scroll>
   </ion-content>
</ion-view>
