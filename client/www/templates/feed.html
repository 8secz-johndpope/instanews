<!DOCTYPE html>
<ion-view view-title="Instanews" style="background: #C0C0C0">
   <ion-nav-buttons side="secondary">
      <a class="button button-clear icon ion-plus-round"
         href="#/post/article">
      </a>
   </ion-nav-buttons>
   <ion-nav-buttons side="primary">
      <button ng-click="toggleMenu()" class="button button-icon icon ion-navicon"></button>
   </ion-nav-buttons>
   <ion-content>
      <ion-refresher pulling-text="Fresh Stuff" on-refresh="onRefresh()">
      </ion-refresher>
      <div class="item no-padding" style="width:100%;height:38%">
         <inMap>
            <div style="width:100%;height:100%" id="feedMap"></div>
         </inMap>
      </div>
      <ul class="list">
         <ion-item class="no-padding card"
            ng-repeat="article in articles | orderBy: '-(rating)'">
            <a class="item no-padding item-text-wrap"
               style="border:transparent"
               href="#/app/articles/{{article.myId}}">
               <div class="item"
                  style="border-bottom:0px;">
                  {{article.title}}
                  <p>{{article.topSub.text}}</p>
               </div>
               <div class="item"
                  style="border-top:0px;padding-right:0px;padding-left:0px;padding-top:0px;padding-bottom:1px">

                  <inData ng-if="article.topSub._file"
                     data="article.topSub._file" id="article.topSub.myId">
                  </inData>
                  <div class="item item-icon-right"
                     style="padding-top:0px;border-top:0px">
                     <div class="icon">
                        <a class="button button-clear no-padding button-small"
                           style="border:transparent"
                           href="#/journalists/{{article.topSub.username}}">
                           {{article.topSub.username}}
                        </a>
                     </div>
                  </div>
               </div>
            </a>

            <div class="item" style="border:0px;padding-top:0px;padding-bottom:0px">
               <inVotes style="border: transparent"
                  votable="article">
               </inVotes>
               <inComments owner="article"></inComments>
            </div>

         </ion-item>
      </ul>
      <ion-infinite-scroll
         ng-if="itemsAvailable"
         on-infinite="loadMore()"
         distance="1%">
      </ion-infinite-scroll>
   </ion-content>
</ion-view>
